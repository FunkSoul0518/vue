webpackJsonp([7],{"8tHC":function(t,s,a){t.exports=a.p+"static/img/user.6d692e1.png"},Gy95:function(t,s){},wqRF:function(t,s,a){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var e=a("Cz8s"),i=a("mzkE"),n=a("mBwW"),o=a("7t+N"),l=a.n(o),c=a("rrFz"),r=a("NHnr"),d={data:function(){return{Cart:[],price:[],temp:{},coupons:[],coupon_code:""}},components:{Header:e.a,Footer:i.a,Sub:n.a,Alert:c.a},methods:{toLink:function(t){this.$router.push("/roominfo/"+t)},getCart:function(){var t=this;this.$http.get("https://vue-course-api.hexschool.io/api/s1002476/cart").then(function(s){t.Cart=s.data.data.carts,t.price=s.data.data,r.eventBus.$emit("CartNum",t.Cart.length)})},deleteModal:function(t){l()("#deleteModal").modal("show"),this.temp=t},deleteProduct:function(){var t=this,s="https://vue-course-api.hexschool.io/api/s1002476/cart/"+t.temp.id;t.$store.dispatch("updateLoading",!0),this.$http.delete(s).then(function(s){t.$store.dispatch("updateLoading",!1),l()("#deleteModal").modal("hide"),r.eventBus.$emit("CartNum",t.Cart.length),t.getCart(),r.eventBus.$emit("message:push","刪除成功!","danger")})},getCoupons:function(){var t=this,s="https://vue-course-api.hexschool.io/api/s1002476/admin/coupons?page="+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1);t.$store.dispatch("updateLoading",!0),this.$http.get(s).then(function(s){t.$store.dispatch("updateLoading",!1),t.coupons=s.data.coupons})},AddCoupon:function(){var t=this,s={code:t.coupon_code};t.$store.dispatch("updateLoading",!0),this.$http.post("https://vue-course-api.hexschool.io/api/s1002476/coupon",{data:s}).then(function(s){t.$store.dispatch("updateLoading",!1),s.data.success?(t.coupon_code="",r.eventBus.$emit("message:push","套用成功!","success")):alert("查無此優惠碼"),t.getCart()})}},computed:{isLoading:function(){return this.$store.state.isLoading}},created:function(){this.getCart(),this.getCoupons()}},u={render:function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",[a("loading",{attrs:{active:t.isLoading},on:{"update:active":function(s){t.isLoading=s}}}),t._v(" "),a("Alert"),t._v(" "),a("Header"),t._v(" "),a("main",{staticClass:"UserOrder my-4"},[a("div",{staticClass:"container"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-8 col-12 order-lg-1 order-2  "},[a("h2",{staticClass:"title mb-4 text-danger"},[t._v("購物車")]),t._v(" "),t._m(0),t._v(" "),a("transition-group",{staticClass:"p-0",attrs:{name:"fade",tag:"ul"}},t._l(t.Cart,function(s){return a("li",{key:s.id,staticClass:"mb-4 pb-md-4 OrderCard"},[a("div",{staticClass:"card border-0"},[a("div",{staticClass:"row no-gutters flex-column flex-md-row"},[a("div",{staticClass:"col-12 col-md-5"},[a("img",{staticClass:"rounded",attrs:{src:s.product.imageUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"col-12 col-md-7"},[a("div",{staticClass:"card-body d-flex flex-column flex-md-row py-4 py-md-0"},[a("ul",{staticClass:"p-0"},[a("li",{staticClass:"row mb-2 align-items-center"},[a("div",{staticClass:"col-2"},[a("font-awesome-icon",{staticClass:"mr-3",attrs:{icon:"bed"}})],1),t._v(" "),a("div",{staticClass:"col-10"},[a("p",{staticClass:"mb-0"},[t._v(t._s(s.product.title))]),t._v(" "),a("small",{staticClass:"mb-0 text-secondary"},[t._v(t._s(s.product.category))])])]),t._v(" "),a("li",{staticClass:"row mb-2"},[a("div",{staticClass:"col-2"},[a("font-awesome-icon",{staticClass:"mr-3",attrs:{icon:"calendar-alt"}})],1),t._v(" "),a("div",{staticClass:"col-8"},[a("p",{staticClass:"mb-0"},[t._v("17 June 2020 - 19 June 2020")]),t._v(" "),a("small",{staticClass:"mb-0 text-secondary"},[t._v("2 nights・2 adults")])])]),t._v(" "),a("li",{staticClass:"row mb-4 mb-md-0 "},[a("div",{staticClass:"col-2"},[a("font-awesome-icon",{staticClass:"mr-3",attrs:{icon:"dollar-sign"}})],1),t._v(" "),a("div",{staticClass:"col-8"},[a("p",{staticClass:"mb-0"},[t._v("\n                              TWD "+t._s(t._f("currencyFilter")(s.final_total))+"\n\n                              "),a("span",{staticClass:"ml-3 text-danger"},[t._v(t._s(s.qty)+t._s(s.product.unit))])]),t._v(" "),a("small",{staticClass:"mb-0 text-secondary"},[t._v("includes taxes and charges")])])])]),t._v(" "),a("div",{staticClass:"d-flex flex-column justify-content-around"},[a("a",{staticClass:"btn btn-primary mb-2",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.toLink(s.product_id)}}},[t._v("商品細節")]),t._v(" "),a("a",{staticClass:"btn btn-danger w-100",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.deleteModal(s)}}},[t._v("刪除")])])])])])])])}),0),t._v(" "),a("div",{staticClass:"input-group mb-3 "},[a("div",{staticClass:"input-group"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.coupon_code,expression:"coupon_code"}],staticClass:"custom-select",on:{change:function(s){var a=Array.prototype.filter.call(s.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.coupon_code=s.target.multiple?a:a[0]}}},t._l(t.coupons,function(s){return a("option",{key:s.id,domProps:{value:s.code}},[t._v(t._s(s.title)+" 折扣比例:"+t._s(s.percent)+"%")])}),0),t._v(" "),a("div",{staticClass:"input-group-append"},[a("button",{staticClass:"btn btn btn-outline-danger",attrs:{type:"button"},on:{click:function(s){return s.preventDefault(),t.AddCoupon(s)}}},[t._v("\n                  套用優惠碼\n                ")])])])]),t._v(" "),a("div",{staticClass:"text-right d-flex justify-content-between align-items-center"},[a("div",{staticClass:"d-flex"},[a("strong",{staticClass:"text-dark mr-3"},[t._v("總價: "+t._s(t._f("currencyFilter")(t.price.total)))]),t._v(" "),t.price.total!=t.price.final_total?a("span",{staticClass:"text-danger"},[t._v("折扣價:"+t._s(t._f("currencyFilter")(t.price.final_total)))]):t._e()]),t._v(" "),a("router-link",{staticClass:"btn btn-primary",attrs:{to:"/reserve"}},[t._v("送出")])],1)],1),t._v(" "),a("div",{staticClass:"col-lg-4 col-12 order-lg-2 order-1 shadow bg-info mb-6 pt-3"},[a("div",{staticClass:"payment_title d-flex justify-content-between align-items-center "},[a("div",{staticClass:"d-flex  "},[a("h2",{staticClass:"title mr-3"},[t._v("付款人資訊")]),t._v(" "),a("p",{staticClass:"bg-primary rounded-pill text-light p-2 "},[a("font-awesome-icon",{attrs:{icon:"check"}}),t._v("\n                VERIFIED\n              ")],1)]),t._v(" "),a("a",{staticClass:"mb-3",attrs:{href:""}},[t._v("Edit")])]),t._v(" "),a("div",{staticClass:"payment rounded-lg p-4 row flex-column flex-md-row flex-lg-column mb-md-5 mb-lg-0 mb-5"},[t._m(1),t._v(" "),a("div",{staticClass:"payment_method col-12 col-md-6 col-lg-12 "},[a("h4",{staticClass:"title mb-4"},[t._v("Payment methods")]),t._v(" "),a("div",{staticClass:"row "},[a("div",{staticClass:"col-6 pr-0"},[a("div",{staticClass:"card  border-0"},[a("ul",{staticClass:"p-3 mb-0 text-secondary"},[a("li",{staticClass:"mb-1"},[t._v("xxxx-xxxx-7890")]),t._v(" "),a("li",{staticClass:"mb-1"},[t._v("DAVID LIN")]),t._v(" "),a("li",{staticClass:"d-flex justify-content-between align-items-center"},[a("span",[t._v("08/2029")]),t._v(" "),a("font-awesome-icon",{attrs:{icon:["fab","cc-visa"]}})],1)])])]),t._v(" "),a("div",{staticClass:"col-6 pl-1"},[a("div",{staticClass:"card border-0 ml-md-1 d-flex justify-content-center align-items-center h-100"},[a("button",{staticClass:"btn btn-primary  rounded-circle"},[a("font-awesome-icon",{attrs:{icon:"plus-circle"}})],1)])])])])])])])])]),t._v(" "),a("div",{staticClass:"my-6"}),t._v(" "),a("Sub"),t._v(" "),a("Footer"),t._v(" "),a("div",{staticClass:"modal fade",attrs:{id:"deleteModal",tabindex:"-1",role:"dialog","aria-labelledby":"deleteModal","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[t._m(2),t._v(" "),a("div",{staticClass:"modal-body"},[t._v("\n          確定要刪除此商品嗎?\n        ")]),t._v(" "),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-danger",attrs:{type:"button","data-dismiss":"modal"}},[t._v("\n            取消\n          ")]),t._v(" "),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(s){return s.preventDefault(),t.deleteProduct()}}},[t._v("\n            確定\n          ")])])])])])],1)},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"d-md-flex mb-4 justify-content-between d-none k"},[s("h5",{staticClass:"border-bottom border-dark pb-2"},[this._v("\n              1.確認購買清單\n            ")]),this._v(" "),s("h5",{staticClass:"text-secondary"},[this._v("2. 填寫訂單資料")]),this._v(" "),s("h5",{staticClass:"text-secondary"},[this._v("3. 完成訂單！")])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"col-12 col-md-6 col-lg-12"},[e("div",{staticClass:"user_details d-flex justify-content-between"},[e("div",[e("h4",{staticClass:"title mb-4"},[t._v("User details")]),t._v(" "),e("div",{staticClass:"d-flex"},[e("img",{staticClass:"userImg d-lg-none d-md-block d-none mr-3",attrs:{src:a("8tHC"),alt:""}}),t._v(" "),e("ul",{staticClass:"p-0 mb-4"},[e("li",{staticClass:"text-secondary mb-3"},[t._v("David Lin")]),t._v(" "),e("li",{staticClass:"text-secondary mb-3"},[t._v("\n                        david0520@mail.com.tw\n                      ")]),t._v(" "),e("li",{staticClass:"text-secondary"},[t._v("+886 9 32 456 789")])])])]),t._v(" "),e("img",{staticClass:"userImg d-lg-block d-md-none",attrs:{src:a("8tHC"),alt:""}})])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"modal-header"},[s("h5",{staticClass:"modal-title",attrs:{id:"deleteModal"}},[this._v("取消預約")]),this._v(" "),s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[s("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])])}]};var v=a("VU/8")(d,u,!1,function(t){a("Gy95")},null,null);s.default=v.exports}});
//# sourceMappingURL=7.b2888e908e631fd44849.js.map