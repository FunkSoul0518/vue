webpackJsonp([11],{YmFj:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("Cz8s"),r=a("mzkE"),i=a("mBwW"),o={data:function(){return{Cart:[],price:{},form:{user:{name:"",email:"",tel:"",address:""},message:""}}},components:{Header:s.a,Footer:r.a,Sub:i.a},methods:{scroll:function(){window.scroll(0,0)},getCart:function(){var t=this;t.$store.dispatch("updateLoading",!0),this.$http.get("https://vue-course-api.hexschool.io/api/s1002476/cart").then(function(e){t.Cart=e.data.data.carts,t.price=e.data.data,t.$store.dispatch("updateLoading",!1)})},createOrder:function(){var t=this,e=this,a=e.form;this.$validator.validate().then(function(s){s?t.$http.post("https://vue-course-api.hexschool.io/api/s1002476/order",{data:a}).then(function(t){t.data.success&&e.$router.push("/reserveSuccess/"+t.data.orderId)}):alert("請填寫正確訊息!")})}},computed:{totalPrice:function(){for(var t=0,e=0;e<this.Cart.length;e++)t+=this.Cart[e].total;return t},isLoading:function(){return this.$store.state.isLoading}},created:function(){this.scroll(),this.getCart()}},n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),t._v(" "),a("Header"),t._v(" "),a("main",{staticClass:"Reserve pt-md-4"},[a("section",{staticClass:"container"},[t._m(0),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 col-md-6 col-lg-4 offset-lg-2 order-2 order-md-1"},[a("form",[a("div",{staticClass:"form-group"},[a("label",{staticClass:"text-secondary",attrs:{for:"InputName"}},[t._v("姓名")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.name,expression:"form.user.name"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control py-3 h-auto",class:{"is-invalid":t.errors.has("name")},attrs:{type:"text",id:"InputName",name:"name",placeholder:"輸入姓名"},domProps:{value:t.form.user.name},on:{input:function(e){e.target.composing||t.$set(t.form.user,"name",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{staticClass:"text-secondary",attrs:{for:"InputEmail1"}},[t._v("Email")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.email,expression:"form.user.email"},{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],staticClass:"form-control py-3 h-auto",class:{"is-invalid":t.errors.has("email")},attrs:{type:"email",id:"InputEmail1","aria-describedby":"emailHelp",name:"email",placeholder:"輸入email"},domProps:{value:t.form.user.email},on:{input:function(e){e.target.composing||t.$set(t.form.user,"email",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group mb-4"},[a("label",{staticClass:"text-secondary",attrs:{for:"InputPhone"}},[t._v("電話")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.tel,expression:"form.user.tel"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control py-3 h-auto",class:{"is-invalid":t.errors.has("tel")},attrs:{type:"tel",id:"InputPhone",name:"tel",placeholder:"輸入電話"},domProps:{value:t.form.user.tel},on:{input:function(e){e.target.composing||t.$set(t.form.user,"tel",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{staticClass:"text-secondary",attrs:{for:"InputAdress"}},[t._v("地址")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.address,expression:"form.user.address"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control py-3 h-auto",class:{"is-invalid":t.errors.has("adress")},attrs:{type:"text",id:"InputAdress",name:"adress",placeholder:"輸入地址"},domProps:{value:t.form.user.address},on:{input:function(e){e.target.composing||t.$set(t.form.user,"address",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"tips"}},[t._v("備註")]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.message,expression:"form.message"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("tips")},attrs:{id:"tips",rows:"3",name:"tips",placeholder:"輸入備註"},domProps:{value:t.form.message},on:{input:function(e){e.target.composing||t.$set(t.form,"message",e.target.value)}}})]),t._v(" "),a("div",{staticClass:" text-center"},[a("button",{staticClass:"btn btn-primary w-100 py-3",on:{click:function(e){return e.preventDefault(),t.createOrder(e)}}},[t._v("\n                Reserve\n              ")])])])]),t._v(" "),a("div",{staticClass:"col-12 col-md-6 col-lg-4  order-1 order-md-2 "},[a("div",{staticClass:"reserveInfo  position-relative"},[a("div",{staticClass:"d-flex justify-content-between align-items-center bg-info d-md-none p-3 "},[a("div",[a("span",{staticClass:"text-dark mr-2"},[t._v("Total")]),a("strong",{staticClass:"text-danger"},[t._v(t._s(t._f("currencyFilter")(t.price.final_total)))])]),t._v(" "),a("a",{staticClass:"text-primary",attrs:{href:"#collapseBooking","data-toggle":"collapse",role:"button","aria-expanded":"false","aria-controls":"collapseBooking"}},[t._v("Detail\n                "),a("font-awesome-icon",{attrs:{icon:"chevron-down"}})],1)]),t._v(" "),a("div",{staticClass:"collapse BookingList d-md-block ",attrs:{id:"collapseBooking"}},[a("div",{staticClass:"card card-body bg-info p-md-4 border-0 pt-5"},[a("div",{staticClass:"mb-3 mb-md-4 pb-3 pb-md-4 border-bottom"},[a("h3",{staticClass:"card-title mb-4"},[t._v("\n                    訂單資訊\n                  ")]),t._v(" "),a("ul",{staticClass:"pl-0 text-secondary"},t._l(t.Cart,function(e){return a("li",{key:e.id,staticClass:"mb-2 d-flex justify-content-between align-items-center pl-2"},[a("p",{staticClass:"text-dark mb-0"},[t._v("\n                        "+t._s(e.product.title)+"\n                      ")]),t._v(" "),a("span",{staticClass:"text-secondary"},[t._v(t._s(e.product.num)+t._s(e.product.unit))])])}),0)]),t._v(" "),a("div",{staticClass:"mb-3 mb-md-4 pb-3 pb-md-4 border-bottom"},[a("h3",{staticClass:"card-title mb-4"},[t._v("\n                    金額\n                  ")]),t._v(" "),a("ul",{staticClass:"pl-0 text-secondary"},t._l(t.Cart,function(e){return a("li",{key:e.id,staticClass:"d-flex justify-content-between align-items-center mb-2 text-dark pl-2"},[a("p",{staticClass:"text-dark mb-0"},[t._v("\n                        "+t._s(e.product.title)+"\n                      ")]),t._v(" "),a("span",{staticClass:"text-success"},[t._v("TWD "+t._s(t._f("currencyFilter")(e.product.price)))])])}),0)]),t._v(" "),a("div",{staticClass:"d-flex justify-content-between align-items-center pl-2 font-weight-bold"},[t._v("\n                  Total\n                  "),t.price.total==t.price.final_total?a("span",{staticClass:"card-title mb-0 text-success"},[t._v("TWD "+t._s(t._f("currencyFilter")(t.price.final_total)))]):a("span",{staticClass:"card-title mb-0 text-danger"},[t._v("折扣價 "+t._s(t._f("currencyFilter")(t.price.final_total)))])])])])])])]),t._v(" "),a("div",{staticClass:"m-5"})])]),t._v(" "),a("Sub"),t._v(" "),a("Footer")],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"d-md-flex mb-4 justify-content-center d-none "},[e("h5",{staticClass:"text-secondary mx-4"},[this._v("\n          1.確認購買清單\n        ")]),this._v(" "),e("h5",{staticClass:"border-bottom border-dark pb-2 mx-4"},[this._v("2. 填寫訂單資料")]),this._v(" "),e("h5",{staticClass:"text-secondary mx-4"},[this._v("3. 完成訂單！")])])}]};var l=a("VU/8")(o,n,!1,function(t){a("dGOm")},null,null);e.default=l.exports},dGOm:function(t,e){}});
//# sourceMappingURL=11.aaf387d03e72a3b8ad32.js.map