webpackJsonp([6],{FaVF:function(t,a){},g4b1:function(t,a,s){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e=s("mvHQ"),i=s.n(e),r=s("cMGX"),n=s("7t+N"),l=s.n(n),c=s("NHnr"),o={data:function(){return{products:[],filterProducts:[],pagination:[],filterText:"",loginState:!1,star:JSON.parse(localStorage.getItem("list"))||[],starFilter:[]}},components:{Paginate:r.a},methods:{getProduct:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=this,s="https://vue-course-api.hexschool.io/api/s1002476/products";a.$store.dispatch("updateLoading",!0),s+="All"==t?"/all":"?page="+t,this.$http.get("https://vue-course-api.hexschool.io/api/s1002476/products/all").then(function(t){a.starFilter=t.data.products}),this.$http.get(s).then(function(s){a.$store.dispatch("updateLoading",!1),a.products=s.data.products,"All"!==t?a.pagination=s.data.pagination:a.products=a.products.reverse()})},AddStar:function(t){var a=this;if(a.star.includes(t.title)){for(var s=0;s<a.star.length;s++)if(a.star[s]===t.title){a.star.splice(s,1),c.eventBus.$emit("message:push","取消成功!","danger");break}}else a.star.push(t.title),c.eventBus.$emit("message:push","加入成功!","success");localStorage.setItem("list",i()(a.star))},toLink:function(t){l()("#starModal").modal("hide"),this.$router.push("/roominfo/"+t)},openStarModal:function(){l()("#starModal").modal("show")}},computed:{filterData:function(){var t=this;return""==this.filterText?this.products:this.products.filter(function(a){return a.category==t.filterText})},starData:function(){var t=this;return t.starFilter.filter(function(a){return t.star.indexOf(a.title)>-1})}},created:function(){this.getProduct()}},d={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("main",{staticClass:"product mt-4"},[s("div",{staticClass:"container"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 mb-3"},[s("h2",{staticClass:"title mb-4"},[t._v("商品列表")]),t._v(" "),s("div",{staticClass:"d-flex filter flex-column flex-md-row"},[s("a",{staticClass:"btn btn-dark mr-3 mb-3 mb-md-0",attrs:{href:""},on:{click:function(a){a.preventDefault(),t.filterText="",t.getProduct(1)}}},[t._v("全部商品")]),t._v(" "),s("a",{staticClass:"btn btn-outline-primary mr-3 mb-3 mb-md-0",attrs:{href:""},on:{click:function(a){a.preventDefault(),t.filterText="別墅",t.getProduct("All")}}},[t._v("別墅")]),t._v(" "),s("a",{staticClass:"btn btn-outline-success mr-3 mb-3 mb-md-0",attrs:{href:""},on:{click:function(a){a.preventDefault(),t.filterText="飯店",t.getProduct("All")}}},[t._v("飯店")]),t._v(" "),s("a",{staticClass:"btn btn-outline-dark mr-3 mb-3 mb-md-0",attrs:{href:""},on:{click:function(a){a.preventDefault(),t.filterText="小木屋",t.getProduct("All")}}},[t._v("小木屋")]),t._v(" "),s("a",{staticClass:"btn btn-outline-danger mr-3 mb-3 mb-md-0",attrs:{href:""},on:{click:function(a){return a.preventDefault(),t.openStarModal()}}},[t._v("我的最愛")])])])]),t._v(" "),s("ul",{staticClass:"row p-0"},t._l(t.filterData,function(a){return s("li",{key:a.id,staticClass:"col-12 mb-5 col-md-6 col-lg-4 animate_shakex"},[s("div",{staticClass:"card border-0 shadow"},[s("div",{staticClass:"card-info-img position-relative bg-cover rounded mb-3",style:{backgroundImage:"url("+a.imageUrl+")"}},[s("a",{staticClass:"position-absolute img-cover",attrs:{href:""},on:{click:function(s){return s.preventDefault(),t.toLink(a.id)}}},[s("p",[t._v("查看更多")])])]),t._v(" "),s("div",{staticClass:"card-body p-2"},[s("div",{staticClass:"d-flex justify-content-between"},[s("h5",{staticClass:"card-title"},[t._v(t._s(a.title))]),t._v(" "),s("a",{staticClass:"text-danger ",attrs:{href:"#"},on:{click:function(s){return s.preventDefault(),t.AddStar(a)}}},[t._v("我的最愛\n                  "),t.star.includes(a.title)?s("font-awesome-icon",{attrs:{icon:"minus"}}):s("font-awesome-icon",{attrs:{icon:"plus"}})],1)]),t._v(" "),s("div",{staticClass:"card-text"},[s("div",{staticClass:"d-flex align-items-center justify-content-between"},[s("span",{staticClass:"text-danger mr-2"},[t._v("TWD "+t._s(t._f("currencyFilter")(a.price)))]),t._v(" "),s("del",{staticClass:"text-secondary"},[t._v("TWD "+t._s(t._f("currencyFilter")(a.origin_price)))])])])])])])}),0)])]),t._v(" "),""==t.filterText?[s("div",{staticClass:"container"},[s("Paginate",{attrs:{pages:t.pagination},on:{changePagnation:t.getProduct}})],1)]:t._e(),t._v(" "),s("div",{staticClass:"modal fade",attrs:{id:"starModal",tabindex:"-1",role:"dialog","aria-hidden":"true"}},[s("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[s("div",{staticClass:"modal-content"},[t._m(0),t._v(" "),s("div",{staticClass:"modal-body"},[s("transition-group",{staticClass:"row p-0",attrs:{name:"fade",tag:"ul"}},t._l(t.starData,function(a){return s("li",{key:a.id,staticClass:"col-12 col-md-6 col-lg-12 mb-5"},[s("div",{staticClass:"card border-0 shadow like"},[s("img",{attrs:{src:a.imageUrl,alt:""}}),t._v(" "),s("div",{staticClass:"card-body p-4"},[s("div",{staticClass:"d-flex justify-content-between"},[s("a",{staticClass:"card-title",attrs:{href:"#"},on:{click:function(s){return s.preventDefault(),t.toLink(a.id)}}},[t._v(t._s(a.title))]),t._v(" "),s("a",{staticClass:"text-danger ",attrs:{href:"#"},on:{click:function(s){return s.preventDefault(),t.AddStar(a)}}},[s("font-awesome-icon",{attrs:{icon:"minus"}})],1)]),t._v(" "),s("div",{staticClass:"card-text"},[s("div",[s("div",{staticClass:"d-flex justify-content-between mb-2"},[s("span",{staticClass:"text-danger mr-2 fz-sm"},[t._v(t._s(t._f("currencyFilter")(a.price)))]),t._v(" "),s("del",{staticClass:"text-secondary  fz-sm"},[t._v(t._s(t._f("currencyFilter")(a.origin_price)))])]),t._v(" "),s("a",{staticClass:"btn btn-outline-primary btn-sm w-100",attrs:{href:""},on:{click:function(s){return s.preventDefault(),t.toLink(a.id)}}},[t._v("查看更多")])])])])])])}),0)],1),t._v(" "),t._m(1)])])])],2)},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title"},[this._v("我的最愛")]),this._v(" "),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"\n                        modal-footer"},[a("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[this._v("\n            Close\n          ")])])}]};var u=s("VU/8")(o,d,!1,function(t){s("FaVF")},null,null);a.default=u.exports},mvHQ:function(t,a,s){t.exports={default:s("qkKv"),__esModule:!0}},qkKv:function(t,a,s){var e=s("FeBl"),i=e.JSON||(e.JSON={stringify:JSON.stringify});t.exports=function(t){return i.stringify.apply(i,arguments)}}});
//# sourceMappingURL=6.4fcac9e232697dcb0e40.js.map